<?php
/**
 * Mage SMS - SMS notification & SMS marketing
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the BSD 3-Clause License
 * It is available through the world-wide-web at this URL:
 * http://opensource.org/licenses/BSD-3-Clause
 *
 * @category    TOPefekt
 * @package     TOPefekt_Magesms
 * @copyright   Copyright (c) 2012-2015 TOPefekt s.r.o. (http://www.mage-sms.com)
 * @license     http://opensource.org/licenses/BSD-3-Clause
 */
?><?php $id = Mage::app()->getRequest()->getParam('id', null); ?><?php $info = $routes[0]->getInfo(); ?><table cellspacing="0" class="data"><tr class="headings"><th><?php echo Mage::helper('magesms')->__('SENDER TYPE'); ?></th><td></td><td></td><th colspan="3" class="a-center"><?php printf(Mage::helper('magesms')->__('SMS PRICE IN %s (excl. VAT)'), $currency); ?></th><td></td></tr><?php foreach($routes as $route): ?><tr class="headings"><td><b><?php echo $route->getAreaText(); ?> (+<?php echo $route->getArea(); ?>)</b><?php if ($id === null): ?><a href="<?php echo Mage::helper("adminhtml")->getUrl('*/*/edit', array('id' => $route->getId())); ?>"><img title="edit <?php echo $route->getAreaText(); ?>" alt="edit <?php echo $route->getAreaText(); ?>" style="border:0px;" name="submitAddAdmin" src="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA).'magesms/edit.gif'; ?>"></a><a href="<?php echo Mage::helper("adminhtml")->getUrl('*/*/delete', array('id' => $route->getId())); ?>" onclick="return confirm('<?php echo Mage::helper('magesms')->__('Are you sure to delete').' '.$route->getAreaText().'?'; ?>')"><img title="delete <?php echo $route->getAreaText(); ?>" alt="delete <?php echo $route->getAreaText(); ?>" style="border:0px;" name="submitAddAdmin" src="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA).'magesms/delete.gif'; ?>"></a><?php endif; ?></td><th><?php echo Mage::helper('magesms')->__('NETWORK'); ?></th><th class="a-center"><?php echo Mage::helper('magesms')->__('SMS PRICE<br />IN CREDITS'); ?></th><th class="a-center"><?php echo Mage::helper('magesms')->__('payment'); ?> <?php echo $info['payment'][0][0]; ?> (<?php echo $currency; ?>)</th><th class="a-center"><?php echo $info['payment'][1][0]; ?> (<?php echo $currency; ?>)</th><th class="a-center"><?php echo $info['payment'][2][0]; ?> (<?php echo $currency; ?>)</th><th class="a-center"><?php echo Mage::helper('magesms')->__('Unicode'); ?> &nbsp;<span onclick="popup_title(this)" title="<?php echo Mage::helper('magesms')->__('Unicode characters support (Unicode allows you to enter characters in all fonts and various symbols simultaneously. Is used for Chinese, Arabic, Greek, Hebrew, Korean, Cyrillic, etc. or diacritic in the text of your SMS message)'); ?>" style="cursor:help;text-decoration:underline;">?</span></th></tr><?php $info = $route->getInfo(); foreach($info['sms'] as $sendertype => $gates): switch($sendertype) { case Topefekt_Magesms_Model_Routes::SENDER_TEXT: $sender_h = Mage::helper('magesms')->__('TEXT SENDER ID'); if ($id === null) { $add = '<b>'.$route->getData('senderID').'</b>'; if ($route->getAlternatives()) { foreach($route->getAlternatives() as $alternative) $add .= ', '.$alternative->getTextsender(); } if (!Mage::app()->isSingleStoreMode()) { $add .= '<br /><button class="form-button" onclick="location.href=\''.Mage::helper("adminhtml")->getUrl('*/*/alternative', array('id' => $route->getId())).'\'" title="'.Mage::helper('magesms')->__('ADD/CHANGE TEXT SENDER ID').'"><span><span><span>'.Mage::helper('magesms')->__('ADD/CHANGE TEXT SENDER ID').'</span></span></span></buton>'; } } else $add = Mage::helper('magesms')->__('e.g.:').' myweb.com'; $pozn = "<span style=\"font-size:10px;\">&nbsp;&nbsp;- ".$add."</span>"; break; case Topefekt_Magesms_Model_Routes::SENDER_SYSTEM: $sender_h = Mage::helper('magesms')->__('SYSTEM NUMBER'); $pozn = "<span style=\"font-size:10px;\">&nbsp;&nbsp;- ".Mage::helper('magesms')->__('e.g.:')." +420602123456</span>"; break; case Topefekt_Magesms_Model_Routes::SENDER_OWN: $sender_h = Mage::helper('magesms')->__('OWN NUMBER SENDER ID'); if ($id === null) $add = '<b>+'.$route->getData('senderID').'</b>'; else $add = Mage::helper('magesms')->__('e.g.:').' +447971796595'; $pozn = "<span style=\"font-size:10px;\">&nbsp;&nbsp;- ".$add."</span>"; break; case Topefekt_Magesms_Model_Routes::SENDER_SIM: $sender_h = Mage::helper('magesms')->__('SIM HOSTING'); $pozn = ""; break; } ?><?php foreach($gates as $gate => $networks): ?><?php if ($id === null ) { if ($route->getIsms() != $gate || $route->getSendertype() != $sendertype ) continue; } $prid = ''; if ($sendertype == 3) $prid = ' ('.$gate.')'; ?><tr class="row"><td rowspan="<?php echo count($networks); ?>"><?php if ($id !== null): ?><input type="radio" name="isms" id="isms_<?php echo $gate.'_'.$sendertype; ?>" value="<?php echo $gate.';'.$sendertype; ?>" <?php echo $route->getIsms() == $gate && $route->getSendertype() == $sendertype ? 'checked' : ''; ?> /><label for="isms_<?php echo $gate.'_'.$sendertype; ?>"><?php echo $sender_h.$prid.$pozn; ?></label><?php else: ?><?php echo $sender_h.$prid.$pozn; ?><?php endif; ?></td><?php $even = 0; foreach($networks as $network => $price): ?><?php if ($even): ?><tr class="<?php if ($even % 2) { echo "even"; $even++; } else { $even++; } ?>"><?php else: $even++;?><?php endif; ?><td><?php echo $network; ?></td><td class="a-center"><?php echo Mage::helper('magesms')->formatPrice($price['credit'], 2); ?></td><td class="a-center"><?php echo Mage::helper('magesms')->formatPrice($price['pay1']); ?></td><td class="a-center"><?php echo Mage::helper('magesms')->formatPrice($price['pay2']); ?></td><td class="a-center"><?php echo Mage::helper('magesms')->formatPrice($price['pay3']); ?></td><td class="a-center"><?php if ($price['unicode'] > 0): ?><img alt="<?php echo Mage::helper('magesms')->__('UNICODE SUPPORTED'); ?>" style="border:0px" src="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA); ?>/magesms/i_accepted.gif"><?php else: ?><img alt="<?php echo Mage::helper('magesms')->__('UNICODE UNSUPPORTED'); ?>" style="border:0px" src="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA); ?>/magesms/i_canceled.gif"><?php endif; ?></td></tr><?php endforeach; ?><?php endforeach; ?><?php endforeach; ?><?php endforeach; ?></table><script type="text/javascript">//<![CDATA[

//]]></script>