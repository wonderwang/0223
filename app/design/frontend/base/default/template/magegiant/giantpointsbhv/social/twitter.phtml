<?php
/**
 * Magegiant
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magegiant.com license that is
 * available through the world-wide-web at this URL:
 * https://magegiant.com/license-agreement/
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Magegiant
 * @package     Magegiant_GiantPoints
 * @copyright   Copyright (c) 2014 Magegiant (https://magegiant.com/)
 * @license     https://magegiant.com/license-agreement/
 */
?>
<!--================Begin Twitter Earning================-->
<script>
    //<![CDATA[
    window.twttr = (function (d, s, id) {
        var t, js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id))
            return;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);
        return window.twttr || (t = {_e: [], ready: function (f) {
            t._e.push(f)
        }});
    }(document, "script", "twitter-wjs"));
    //]]>
</script>

<div class="twitter-earning">
    <?php if ($this->showButtonCount()): ?>
        <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en"
           data-url="<?php echo $this->getCurrentUrl() ?>">Tweet</a>
    <?php else: ?>
        <a class="twitter-share-button" href="https://twitter.com/share" data-url="<?php echo $this->getCurrentUrl() ?>"
           data-lang="en" data-count="none">Tweet</a>
    <?php endif; ?>
</div>

<script>
    twttr.ready(function (twttr) {
        twttr.events.bind('tweet', function (event) {
            var defaultMessage = '<?php echo $this->getRewardEarnInfo() ?>';
            var url = '<?php echo $this->getUrl('giantpointsbhv/social_tweet/process') ?>';
            var link = '<?php echo $this->getCurrentUrl()?>';
            var parameters = {link: link};
            new SocialEarnAjax(url, parameters, defaultMessage, $('social_ajax_loader'), $('social_earn_info'));
        });
    });
</script>
<!--==============End Twitter Earning===============-->