<?php
/**
 * Magegiant
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magegiant.com license that is
 * available through the world-wide-web at this URL:
 * https://magegiant.com/license-agreement/
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Magegiant
 * @package     Magegiant_GiantPoints
 * @copyright   Copyright (c) 2014 Magegiant (https://magegiant.com/)
 * @license     https://magegiant.com/license-agreement/
 */
?>
<!--================Begin Google Earning================-->
<div class="google-earning">
    <?php if ($this->showButtonCount()): ?>
        <div class="g-plusone" data-size="medium" data-callback="googleEarnAjax" data-href="<?php echo $this->getCurrentUrl()?>"></div>
    <?php else: ?>
        <div class="g-plusone" data-size="medium" data-annotation="none" data-callback="googleEarnAjax"
             data-href="<?php echo $this->getCurrentUrl()?>"></div>
    <?php endif; ?>

</div>
<script type="text/javascript">
    //<![CDATA[
    (function () {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/platform.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
    (function () {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
    function googleEarnAjax(obj) {
        var defaultMessage = '<?php echo $this->getRewardEarnInfo() ?>';
        var url = '<?php echo $this->getUrl('giantpointsbhv/social_google/process') ?>';
        var parameters = { action: obj.state, link: obj.href};
        new SocialEarnAjax(url, parameters, defaultMessage, $('social_ajax_loader'), $('social_earn_info'));
    }
    //]]>

</script>
<!--==============End Google Earning===============-->